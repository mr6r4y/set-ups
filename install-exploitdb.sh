#!/bin/bash

#: Title: install-exploitdb.sh
#: Description: Installation of searchsploit
#: References: https://github.com/offensive-security/exploitdb.git

SCRIPT_DIR="$(dirname "$(readlink -f "$0")")"

source "$SCRIPT_DIR/lib/common.sh"
source "$SCRIPT_DIR/config.sh"

set -e

create_repo_dir "$REPODIR" "$USER"

# Clone metasploit from GitHub
cd $REPODIR
if [[ ! -e $REPODIR/exploitdb ]]; then
    echo "[*] Clone exploitdb"
    git clone https://github.com/offensive-security/exploitdb.git
fi
cd exploitdb

create_local_bin
echo "[*] Link searchsploit in $HOME/.local/bin"
ln -s "$(pwd)/searchsploit" "$HOME/.local/bin/searchsploit"
