#!/bin/bash

#: Title: install-exploitdb.sh
#: Description: Installation of searchsploit
#: References: https://github.com/offensive-security/exploitdb.git

SCRIPT_DIR="$(dirname "$(readlink -f "$0")")"

source "$SCRIPT_DIR/lib/common.sh"
source "$SCRIPT_DIR/config.sh"

set -e

OLDDIR=$(pwd)

create_repo_dir "$REPODIR" "$USER"

# Clone exploitdb from GitHub
cd $REPODIR
pushd .
if [[ ! -e $REPODIR/exploitdb ]]; then
    echo "[*] Clone exploitdb"
    git clone https://github.com/offensive-security/exploitdb.git
fi
cd exploitdb

create_local_bin
if [ ! -e  "$HOME/.local/bin/searchsploit" ]
then
    echo "[*] Link searchsploit in $HOME/.local/bin"
    ln -s "$(pwd)/searchsploit" "$HOME/.local/bin/searchsploit"
fi

cd $OLDDIR
